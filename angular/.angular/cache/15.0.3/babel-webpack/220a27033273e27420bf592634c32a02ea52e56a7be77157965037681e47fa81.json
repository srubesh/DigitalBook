{"ast":null,"code":"import { HttpHeaders } from '@angular/common/http';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nconst DIRECT_API_URL = 'https://35.78.71.239:8081/digitalbooks/';\nconst API_URL = 'https://671e0i80l8.execute-api.ap-northeast-1.amazonaws.com/DEV/';\nconst httpOptions = {\n  headers: new HttpHeaders({\n    'Content-Type': 'application/json'\n  })\n};\nexport class UserService {\n  constructor(http) {\n    this.http = http;\n  }\n  // getPublicContent(): Observable<any> {\n  //   return this.http.get(API_URL + 'all', { responseType: 'text' });\n  // }\n  //author/{author-id}/books\n  //digitalbook/book/save-book/{author-id}\n  createBook(image, create, authorId) {\n    const formdata = new FormData();\n    formdata.append('image', image);\n    formdata.append('title', create.title);\n    formdata.append('category', create.category);\n    formdata.append('price', create.price);\n    formdata.append('publisher', create.publisher);\n    formdata.append('active', create.active);\n    formdata.append('content', create.content);\n    // return this.http.post(DIRECT_API_URL +'author/'+authorId+'/books',formdata, { responseType: 'json' });\n    return this.http.post(API_URL + 'digitalbook/book/save-book/' + authorId, formdata, {\n      responseType: 'json'\n    });\n  }\n  //author/{author-id}/books/{book-id}\n  // digitalbook/book/save-book/{author-id}/{book-id}\n  updateBook(image, update, authorId, bookId) {\n    const formdata = new FormData();\n    formdata.append('image', image);\n    formdata.append('title', update.title);\n    formdata.append('category', update.category);\n    formdata.append('price', update.price);\n    formdata.append('publisher', update.publisher);\n    formdata.append('active', update.active);\n    formdata.append('content', update.content);\n    // return this.http.put(DIRECT_API_URL +'author/'+authorId+'/books/'+bookId,formdata, { responseType: 'json' });\n    return this.http.put(API_URL + 'digitalbook/book/save-book/' + authorId + '/' + bookId, formdata, {\n      responseType: 'json'\n    });\n  }\n  // digitalbook/book/search-book/author-id/{author-id}\n  getAllBooks(authorId) {\n    // return this.http.get(API_URL + 'author/'+authorId, { responseType: 'json' });\n    return this.http.get(API_URL + 'digitalbook/book/search-book/author-id/' + authorId, {\n      responseType: 'json'\n    });\n  }\n  // digitalbook/book/search-book/{id}\n  getBook(bookId) {\n    // return this.http.get(API_URL + 'test/'+bookId, { responseType: 'json' });\n    return this.http.get(API_URL + 'digitalbook/book/search-book/' + bookId, {\n      responseType: 'json'\n    });\n  }\n  // author/{author-id}/books/{book-id}/{block}\n  // digitalbook/book/save-book/{author-id}/{book-id}/{block}\n  blockOrUnblockBook(authorId, bookId, block) {\n    // return this.http.put(API_URL + 'author/'+authorId+'/books/'+bookId+\"/\"+block, { responseType: 'json' });\n    return this.http.put(API_URL + 'digitalbook/book/save-book/' + authorId + '/' + bookId + \"/\" + block, {\n      responseType: 'json'\n    });\n  }\n  //readers/{emailId}/books\n  // digitalbook/user/subscribtion/subscribed-books/{email}\n  getSubscribedBooks(readerEmail) {\n    // return this.http.get(API_URL + 'readers/'+readerEmail+\"/books\", { responseType: 'json' });\n    return this.http.get(API_URL + 'digitalbook/user/subscribtion/subscribed-books/' + readerEmail, {\n      responseType: 'json'\n    });\n  }\n  //readers/{email-id}/books/{subscription-id}/cancel-subscription\n  // digitalbook/user/subscribtion/content/{email}/{sub-id}\n  unSubscriveBook(readerEmail, subscriptionId) {\n    // return this.http.put(API_URL + 'readers/'+readerEmail+'/books/'+subscriptionId+\"/cancel-subscription\", { responseType: 'json' });\n    return this.http.put(API_URL + 'digitalbook/user/subscribtion/content/' + readerEmail + '/' + subscriptionId, {\n      responseType: 'json'\n    });\n  }\n  ///{book-id}/subscribe\n  // digitalbook/user/subscribtion/subscribe/{book-id}\n  subscribeBook(email, bookId) {\n    // return this.http.post(API_URL +bookId+'/subscribe',{\n    //   bookId,\n    //   email\n    // }, { responseType: 'json' });\n    return this.http.post(API_URL + 'digitalbook/user/subscribtion/subscribe/' + bookId, {\n      bookId,\n      email\n    }, {\n      responseType: 'json'\n    });\n  }\n  //readers/{emailId}/books/{subscription-id}/read\n  // digitalbook/user/subscribtion/content/{email}/{sub-id}\n  getBookContent(readerEmail, subscriptionId) {\n    // return this.http.get(API_URL + 'readers/'+readerEmail+'/books/'+subscriptionId+\"/read\", { responseType: 'json' });\n    return this.http.get(API_URL + 'digitalbook/user/subscribtion/content/' + readerEmail + '/' + subscriptionId, {\n      responseType: 'json'\n    });\n  }\n  //all/authors\n  // getAllAuthors(): Observable<any> {\n  //   return this.http.get(API_URL + 'all/authors', { responseType: 'json' });\n  // }\n  //'searchBook?title=&author=&publishedDate=&publisher='\n  // search-book?title=&author=&publishedDate=&publisher=\n  searchBook(searchQuery) {\n    if (searchQuery === null || searchQuery === undefined) return this.http.get(API_URL + \"digitalbook/book/\" + 'search-book?title=&author=&publishedDate=&publisher=', {\n      responseType: 'json'\n    });\n    return this.http.get(API_URL + \"digitalbook/book/\" + searchQuery, {\n      responseType: 'json'\n    });\n  }\n}\nUserService.ɵfac = function UserService_Factory(t) {\n  return new (t || UserService)(i0.ɵɵinject(i1.HttpClient));\n};\nUserService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: UserService,\n  factory: UserService.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"mappings":"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","names":["HttpHeaders","DIRECT_API_URL","API_URL","httpOptions","headers","UserService","constructor","http","createBook","image","create","authorId","formdata","FormData","append","title","category","price","publisher","active","content","post","responseType","updateBook","update","bookId","put","getAllBooks","get","getBook","blockOrUnblockBook","block","getSubscribedBooks","readerEmail","unSubscriveBook","subscriptionId","subscribeBook","email","getBookContent","searchBook","searchQuery","undefined","factory","providedIn"],"sourceRoot":"","sources":["C:\\H&T Training\\DigitalBook\\DigitalBook\\angular\\src\\app\\_services\\user.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\n\r\nconst DIRECT_API_URL = 'https://35.78.71.239:8081/digitalbooks/';\r\nconst API_URL = 'https://671e0i80l8.execute-api.ap-northeast-1.amazonaws.com/DEV/';\r\n\r\nconst httpOptions = {\r\n  headers: new HttpHeaders({ 'Content-Type': 'application/json' })\r\n};\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class UserService {\r\n  constructor(private http: HttpClient) { }\r\n\r\n  // getPublicContent(): Observable<any> {\r\n  //   return this.http.get(API_URL + 'all', { responseType: 'text' });\r\n  // }\r\n\r\n  //author/{author-id}/books\r\n  //digitalbook/book/save-book/{author-id}\r\n  createBook(image : File, create : any, authorId : number){\r\n    const formdata : FormData = new FormData();\r\n    formdata.append('image',image);\r\n    formdata.append('title',create.title);\r\n    formdata.append('category',create.category);\r\n    formdata.append('price',create.price);\r\n    formdata.append('publisher',create.publisher);\r\n    formdata.append('active',create.active);\r\n    formdata.append('content',create.content);\r\n\r\n    // return this.http.post(DIRECT_API_URL +'author/'+authorId+'/books',formdata, { responseType: 'json' });\r\n    return this.http.post(API_URL +'digitalbook/book/save-book/'+authorId,formdata, { responseType: 'json' });\r\n  }\r\n\r\n  //author/{author-id}/books/{book-id}\r\n  // digitalbook/book/save-book/{author-id}/{book-id}\r\n  updateBook(image : File, update : any, authorId : number, bookId:number){\r\n    const formdata : FormData = new FormData();\r\n    formdata.append('image',image);\r\n    formdata.append('title',update.title);\r\n    formdata.append('category',update.category);\r\n    formdata.append('price',update.price);\r\n    formdata.append('publisher',update.publisher);\r\n    formdata.append('active',update.active);\r\n    formdata.append('content',update.content);\r\n\r\n    // return this.http.put(DIRECT_API_URL +'author/'+authorId+'/books/'+bookId,formdata, { responseType: 'json' });\r\n    return this.http.put(API_URL +'digitalbook/book/save-book/'+authorId+'/'+bookId,formdata, { responseType: 'json' });\r\n  }\r\n\r\n  // digitalbook/book/search-book/author-id/{author-id}\r\n  getAllBooks(authorId : number): Observable<any> {\r\n    // return this.http.get(API_URL + 'author/'+authorId, { responseType: 'json' });\r\n    return this.http.get(API_URL + 'digitalbook/book/search-book/author-id/'+authorId, { responseType: 'json' });\r\n  }\r\n\r\n  // digitalbook/book/search-book/{id}\r\n  getBook(bookId : any): Observable<any> {\r\n    // return this.http.get(API_URL + 'test/'+bookId, { responseType: 'json' });\r\n    return this.http.get(API_URL + 'digitalbook/book/search-book/'+bookId, { responseType: 'json' });\r\n  }\r\n\r\n  // author/{author-id}/books/{book-id}/{block}\r\n  // digitalbook/book/save-book/{author-id}/{book-id}/{block}\r\n  blockOrUnblockBook(authorId : number,bookId : number, block : string){\r\n    // return this.http.put(API_URL + 'author/'+authorId+'/books/'+bookId+\"/\"+block, { responseType: 'json' });\r\n    return this.http.put(API_URL + 'digitalbook/book/save-book/'+authorId+'/'+bookId+\"/\"+block, { responseType: 'json' });\r\n  }\r\n\r\n  //readers/{emailId}/books\r\n  // digitalbook/user/subscribtion/subscribed-books/{email}\r\n  getSubscribedBooks(readerEmail : string): Observable<any> {\r\n    // return this.http.get(API_URL + 'readers/'+readerEmail+\"/books\", { responseType: 'json' });\r\n    return this.http.get(API_URL + 'digitalbook/user/subscribtion/subscribed-books/'+readerEmail, { responseType: 'json' });\r\n  }\r\n\r\n  //readers/{email-id}/books/{subscription-id}/cancel-subscription\r\n  // digitalbook/user/subscribtion/content/{email}/{sub-id}\r\n  unSubscriveBook(readerEmail : string, subscriptionId : string){\r\n    // return this.http.put(API_URL + 'readers/'+readerEmail+'/books/'+subscriptionId+\"/cancel-subscription\", { responseType: 'json' });\r\n    return this.http.put(API_URL + 'digitalbook/user/subscribtion/content/'+readerEmail+'/'+subscriptionId, { responseType: 'json' });\r\n  }\r\n\r\n  ///{book-id}/subscribe\r\n  // digitalbook/user/subscribtion/subscribe/{book-id}\r\n  subscribeBook(email : string, bookId : number){\r\n    // return this.http.post(API_URL +bookId+'/subscribe',{\r\n    //   bookId,\r\n    //   email\r\n    // }, { responseType: 'json' });\r\n    return this.http.post(API_URL +'digitalbook/user/subscribtion/subscribe/'+bookId,{\r\n      bookId,\r\n      email\r\n    }, { responseType: 'json' });\r\n  }\r\n\r\n\r\n  //readers/{emailId}/books/{subscription-id}/read\r\n  // digitalbook/user/subscribtion/content/{email}/{sub-id}\r\n  getBookContent(readerEmail : string, subscriptionId : string){\r\n    // return this.http.get(API_URL + 'readers/'+readerEmail+'/books/'+subscriptionId+\"/read\", { responseType: 'json' });\r\n    return this.http.get(API_URL + 'digitalbook/user/subscribtion/content/'+readerEmail+'/'+subscriptionId, { responseType: 'json' });\r\n  }\r\n\r\n  //all/authors\r\n  // getAllAuthors(): Observable<any> {\r\n  //   return this.http.get(API_URL + 'all/authors', { responseType: 'json' });\r\n  // }\r\n\r\n  //'searchBook?title=&author=&publishedDate=&publisher='\r\n  // search-book?title=&author=&publishedDate=&publisher=\r\n  searchBook(searchQuery : any ):  Observable<any> {\r\n    if(searchQuery === null || searchQuery === undefined)\r\n      return this.http.get(API_URL +\"digitalbook/book/\"+ 'search-book?title=&author=&publishedDate=&publisher=', { responseType: 'json' });\r\n    return this.http.get(API_URL +\"digitalbook/book/\"+ searchQuery, { responseType: 'json' });\r\n  }\r\n\r\n  // searchBook(searchQuery : any ):  Observable<any> {\r\n  //   if(searchQuery === null || searchQuery === undefined)\r\n  //     return this.http.get(DIRECT_API_URL + 'searchBook?title=&author=&publishedDate=&publisher=', { responseType: 'json' });\r\n  //   return this.http.get(DIRECT_API_URL + searchQuery, { responseType: 'json' });\r\n  // }\r\n}\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}