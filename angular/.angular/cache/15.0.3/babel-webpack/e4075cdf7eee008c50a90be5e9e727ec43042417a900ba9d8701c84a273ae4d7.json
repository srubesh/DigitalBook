{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nconst API_URL = 'http://localhost:8081/digitalbooks/';\nexport class UserService {\n  constructor(http) {\n    this.http = http;\n  }\n  // getPublicContent(): Observable<any> {\n  //   return this.http.get(API_URL + 'all', { responseType: 'text' });\n  // }\n  //author/{author-id}/books\n  createBook(image, create, authorId) {\n    const formdata = new FormData();\n    formdata.append('image', image);\n    formdata.append('title', create.title);\n    formdata.append('category', create.category);\n    formdata.append('price', create.price);\n    formdata.append('publisher', create.publisher);\n    formdata.append('active', create.active);\n    formdata.append('content', create.content);\n    return this.http.post(API_URL + 'author/' + authorId + '/books', formdata, {\n      responseType: 'json'\n    });\n  }\n  getAllBooks(authorId) {\n    return this.http.get(API_URL + 'author/' + authorId, {\n      responseType: 'json'\n    });\n  }\n  getBook(bookId) {\n    return this.http.get(API_URL + 'test/' + bookId, {\n      responseType: 'json'\n    });\n  }\n  blockOrUnblockBook(authorId, bookId, block) {\n    return this.http.put(API_URL + 'author/' + authorId + '/books/' + bookId + \"/\" + block, {\n      responseType: 'json'\n    });\n  }\n  //readers/{emailId}/books\n  getSubscribedBooks(readerEmail) {\n    return this.http.get(API_URL + 'readers/' + readerEmail + \"/books\", {\n      responseType: 'json'\n    });\n  }\n  //readers/{email-id}/books/{subscription-id}/cancel-subscription\n  unSubscriveBook(readerEmail, subscriptionId) {\n    return this.http.put(API_URL + 'readers/' + readerEmail + '/books/' + subscriptionId + \"/cancel-subscription\", {\n      responseType: 'json'\n    });\n  }\n  ///{book-id}/subscribe\n  subscribeBook(email, bookId) {\n    return this.http.post(API_URL + bookId + '/subscribe', {\n      bookId,\n      email\n    }, {\n      responseType: 'json'\n    });\n  }\n  //readers/{emailId}/books/{subscription-id}/read\n  getBookContent(readerEmail, subscriptionId) {\n    return this.http.get(API_URL + 'readers/' + readerEmail + '/books/' + subscriptionId + \"/read\", {\n      responseType: 'json'\n    });\n  }\n  //all/authors\n  // getAllAuthors(): Observable<any> {\n  //   return this.http.get(API_URL + 'all/authors', { responseType: 'json' });\n  // }\n  //'searchBook?title=&author=&publishedDate=&publisher='\n  searchBook(searchQuery) {\n    if (searchQuery === null || searchQuery === undefined) return this.http.get(API_URL + 'searchBook?title=&author=&publishedDate=&publisher=', {\n      responseType: 'json'\n    });\n    return this.http.get(API_URL + searchQuery, {\n      responseType: 'json'\n    });\n  }\n}\nUserService.ɵfac = function UserService_Factory(t) {\n  return new (t || UserService)(i0.ɵɵinject(i1.HttpClient));\n};\nUserService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: UserService,\n  factory: UserService.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"mappings":"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","names":["API_URL","UserService","constructor","http","createBook","image","create","authorId","formdata","FormData","append","title","category","price","publisher","active","content","post","responseType","getAllBooks","get","getBook","bookId","blockOrUnblockBook","block","put","getSubscribedBooks","readerEmail","unSubscriveBook","subscriptionId","subscribeBook","email","getBookContent","searchBook","searchQuery","undefined","factory","providedIn"],"sourceRoot":"","sources":["C:\\H&T Training\\DigitalBook\\DigitalBook\\angular\\src\\app\\_services\\user.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\n\r\nconst API_URL = 'http://localhost:8081/digitalbooks/';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class UserService {\r\n  constructor(private http: HttpClient) { }\r\n\r\n  // getPublicContent(): Observable<any> {\r\n  //   return this.http.get(API_URL + 'all', { responseType: 'text' });\r\n  // }\r\n\r\n  //author/{author-id}/books\r\n  createBook(image : File, create : any, authorId : number){\r\n    const formdata : FormData = new FormData();\r\n    formdata.append('image',image);\r\n    formdata.append('title',create.title);\r\n    formdata.append('category',create.category);\r\n    formdata.append('price',create.price);\r\n    formdata.append('publisher',create.publisher);\r\n    formdata.append('active',create.active);\r\n    formdata.append('content',create.content);\r\n\r\n    return this.http.post(API_URL +'author/'+authorId+'/books',formdata, { responseType: 'json' });\r\n  }\r\n\r\n  getAllBooks(authorId : number): Observable<any> {\r\n    return this.http.get(API_URL + 'author/'+authorId, { responseType: 'json' });\r\n  }\r\n\r\n  getBook(bookId : number): Observable<any> {\r\n    return this.http.get(API_URL + 'test/'+bookId, { responseType: 'json' });\r\n  }\r\n  \r\n  blockOrUnblockBook(authorId : number,bookId : number, block : string){\r\n    return this.http.put(API_URL + 'author/'+authorId+'/books/'+bookId+\"/\"+block, { responseType: 'json' });\r\n  }\r\n\r\n  //readers/{emailId}/books\r\n  getSubscribedBooks(readerEmail : string): Observable<any> {\r\n    return this.http.get(API_URL + 'readers/'+readerEmail+\"/books\", { responseType: 'json' });\r\n  }\r\n\r\n  //readers/{email-id}/books/{subscription-id}/cancel-subscription\r\n  unSubscriveBook(readerEmail : string, subscriptionId : string){\r\n    return this.http.put(API_URL + 'readers/'+readerEmail+'/books/'+subscriptionId+\"/cancel-subscription\", { responseType: 'json' });\r\n  }\r\n\r\n  ///{book-id}/subscribe\r\n  subscribeBook(email : string, bookId : number){\r\n    return this.http.post(API_URL +bookId+'/subscribe',{\r\n      bookId,\r\n      email\r\n    }, { responseType: 'json' });\r\n  }\r\n\r\n\r\n  //readers/{emailId}/books/{subscription-id}/read\r\n  getBookContent(readerEmail : string, subscriptionId : string){\r\n    return this.http.get(API_URL + 'readers/'+readerEmail+'/books/'+subscriptionId+\"/read\", { responseType: 'json' });\r\n  }\r\n\r\n  //all/authors\r\n  // getAllAuthors(): Observable<any> {\r\n  //   return this.http.get(API_URL + 'all/authors', { responseType: 'json' });\r\n  // }\r\n\r\n  //'searchBook?title=&author=&publishedDate=&publisher='\r\n  searchBook(searchQuery : any ):  Observable<any> {\r\n    if(searchQuery === null || searchQuery === undefined)\r\n      return this.http.get(API_URL + 'searchBook?title=&author=&publishedDate=&publisher=', { responseType: 'json' });\r\n    return this.http.get(API_URL + searchQuery, { responseType: 'json' });\r\n  }\r\n\r\n  // getModeratorBoard(): Observable<any> {\r\n  //   return this.http.get(API_URL + 'mod', { responseType: 'text' });\r\n  // }\r\n\r\n  // getAdminBoard(): Observable<any> {\r\n  //   return this.http.get(API_URL + 'admin', { responseType: 'text' });\r\n  // }\r\n}\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}